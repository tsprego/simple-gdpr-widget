<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GDPR Widget Live Demo</title>
    <style>
        /* (Styles remain the same, I hid them to save space) */
        body { font-family: sans-serif; text-align: center; padding: 50px; background: #f4f4f9; }
        .container { background: white; max-width: 600px; margin: 0 auto; padding: 40px; border-radius: 12px; }
        .controls { margin: 30px 0; padding: 20px; background: #eef2f5; border: 1px dashed #cbd5e0; }
        select { padding: 10px; font-size: 16px; width: 70%; }
    </style>

    <script>
        // 1. Get the URL parameters
        const urlParams = new URLSearchParams(window.location.search);
        
        // 2. If URL has "?theme=X", use X. If not, use 1.
        const currentTheme = parseInt(urlParams.get('theme')) || 1;

        // 3. Set the config using that number
        window.GDPR_CONFIG = {
            logo: 'https:/https://tsprego.dk/logo/SmallLogo.png',
            theme: currentTheme, 
            validityHours: 24
        };
    </script>

    <script src="gdpr-widget.js" defer></script>

</head>
<body>

    <div class="container">
        <h1>üç™ GDPR Widget Demo</h1>
        <p>This is a live preview of the open-source GDPR widget.</p>

        <div class="controls">
            <h3>üé® Test Different Themes</h3>
            <p>Select a style to reload the page:</p>
            
            <select id="theme-selector" onchange="changeTheme(this.value)">
                <option value="1">1. Default Light</option>
                <option value="2">2. Dark Mode</option>
                <option value="3">3. Midnight Red</option>
                <option value="4">4. Brutalist (B&W)</option>
                <option value="5">5. Blue Breeze</option>
                <option value="6">6. Orange Sunset</option>
                <option value="7">7. Forest Green</option>
                <option value="8">8. Royal Purple</option>
                <option value="9">9. Hacker (Matrix)</option>
                <option value="10">10. Minimalist Grey</option>
            </select>
        </div>

        <button onclick="resetCookie()" style="margin-top:20px; padding:10px; cursor:pointer;">
            Reset Consent Cookie (Test Again)
        </button>
    </div>

    <script>
        // Set the dropdown to show the active theme
        document.getElementById('theme-selector').value = currentTheme;

        // üî¥ CHANGED 4: The Change Function
        // Old version: Tried to delete HTML and swap scripts (Unstable).
        // New version: Forces a page reload. This clears the browser memory so the button works 100%.
        function changeTheme(newThemeID) {
            // 1. Delete the cookie (so the banner actually appears on the next load)
            document.cookie = "gdpr_consent_timestamp=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";
            
            // 2. Reload the page with the new ID in the URL
            window.location.href = '?theme=' + newThemeID;
        }

        function resetCookie() {
            document.cookie = "gdpr_consent_timestamp=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";
            location.reload();
        }
    </script>

</body>
</html>
   
