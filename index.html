<!DOCTYPE html>
<html>
<head>
    <title>GDPR Widget Demo</title>
   <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f4f4f9;
            color: #333;
            text-align: center;
            padding: 50px 20px;
        }
        .container {
            background: white;
            max-width: 600px;
            margin: 0 auto;
            padding: 40px;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }
        h1 { margin-top: 0; color: #2c3e50; }
        p { line-height: 1.6; color: #666; }
        
        /* --- NEW: STYLING FOR THE DROPDOWN MENU --- */
        .controls {
            margin: 30px 0;
            padding: 20px;
            background: #eef2f5;
            border-radius: 8px;
            border: 1px dashed #cbd5e0;
        }
        select {
            padding: 10px;
            font-size: 16px;
            border-radius: 4px;
            border: 1px solid #ccc;
            width: 70%;
            cursor: pointer;
        }
        /* ------------------------------------------ */
    </style>
    
    <script>
        window.GDPR_CONFIG = {
            logo: 'https://tsprego.dk/logo/SmallLogo.png',
            theme: 1,
            validityHours: 0
        };
    </script>
    
    <script src="gdpr-widget.js" defer></script>
</head>
<body>

    <div class="container">
        <h1>üç™ GDPR Widget Demo</h1>
        <p>This is a live preview of the open-source GDPR widget.</p>
        <p>The banner should be visible at the bottom right.</p>

        <div class="controls">
            <h3>üé® Test Different Themes</h3>
            <p>Select a style to instantly update the banner:</p>
            
            <select id="theme-selector" onchange="changeTheme(this.value)">
                <option value="1">1. Default Light</option>
                <option value="2">2. Dark Mode</option>
                <option value="3">3. Midnight Red</option>
                <option value="4">4. Brutalist (B&W)</option>
                <option value="5">5. Blue Breeze</option>
                <option value="6">6. Orange Sunset</option>
                <option value="7">7. Forest Green</option>
                <option value="8">8. Royal Purple</option>
                <option value="9">9. Hacker (Matrix)</option>
                <option value="10">10. Minimalist Grey</option>
            </select>
        </div>
        <p style="font-size: 12px; color: #999;">
            *Note: Changing the theme here resets your consent cookie so you can see the banner again.
        </p>
    </div>

    <script>
        // Load the widget initially
        loadWidget();

        function loadWidget() {
            // STEP 1: Remove the old script tag if it exists
            // This prevents "variable already declared" errors
            const oldScript = document.getElementById('gdpr-widget-script');
            if (oldScript) {
                oldScript.remove();
            }

            // STEP 2: Create the new script tag
            const script = document.createElement('script');
            script.id = 'gdpr-widget-script'; // Give it an ID so we can find it next time
            // Add a timestamp (?t=...) to force the browser to download the new version
            script.src = 'gdpr-widget.js?t=' + Date.now(); 
            
            // STEP 3: Add it to the page
            document.body.appendChild(script);
        }

        function changeTheme(newThemeID) {
            // 1. Update the global config variable
            window.GDPR_CONFIG.theme = parseInt(newThemeID);

            // 2. Remove the old banner visual from the screen
            const oldBox = document.getElementById('gdpr-box');
            if(oldBox) oldBox.remove();

            // 3. Reset the cookie so the widget thinks we are a new user
            document.cookie = "gdpr_consent_timestamp=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";

            // 4. Reload the script
            loadWidget();
        }
    </script>
</body>
</html>
   
